;; Allow my custom keycode to be passed through to the QMK code
(defun my-mugur--keycode (orig-fun mugur-key)
              (or (and (eq 'HYPER mugur-key) "HYPER")
                  (apply orig-fun (list mugur-key))))

(advice-add 'mugur--keycode
            :around #'my-mugur--keycode)

(let ((mugur-qmk-path       "~/code/qmk")
      (mugur-keyboard-name   "ergotravel")
      (mugur-layout-name     "LAYOUT")
      (mugur-keymap-name     "test")
      (mugur-tapping-term    175)
      (mugur-user-defined-keys
        '((lwr . (LT lower space))
          (rse . (LT raise space))
          (adj . (MO adjust))
          (~ . ?\~)
          (! . ?\!)
          (@ . ?\@)
          (\# . ?\#)
          ($ . ?\$)
          (% . ?\%)
          ;;(^ . ?\^)
          (& . ?\&)
          (* . ?\*)
          ;;(( . ?\))
          ;;() . ?\))
          (= . ?\=)
          (- . ?\-)
          (+ . ?\+)
          (_ . ?\_)
          (| . ?\|)
          (\\ . ?\\)
          (\; . ?\;)
          (\' . ?\')
          (\` . ?\`)
          (/ . ?\/)
          (\. . ?\.)
          (\, . ?\,)
          ;; TODO Fix norwegian letters
          (æ . ?\\)
          (ø . ?\_)
          (å . ?\|))))

 (mugur-mugur
  '(("base"
;;
;;           ╭───┬───┬───┬───╮       ╭────╮╭───┬───┬───┬───╮
      -x- -x-  w   e   r   t   -x-   bspace  y   u   i   o   -x-  -x-
;;   ╭───┬───┼───┼───┼───┼───┤       ├────┤├───┼───┼───┼───┼────┬────╮
       H   q   s   d   f   g   -x-    -x-    h   j   k   l    p   -x-
;;   ├───┼───┼───┼───┼───┼───┤       ╰────╯├───┼───┼───┼───┼────┼────┤
       S   a   x   c   v   b   -x-    -x-    n   m  \,  \.   \;   \'
;;   ├───┼───┼───┴───┴───┼───┼─────╮ ╭─────┼───┼───┴───┴───┼────┼────┤
       M   z  -x- -x-      G  lwr     rse    C      -x- -x-   /    S )
;;   ╰───┴───╯           ╰───┴─────╯ ╰─────┴───╯           ╰────┴────╯

     ("lower"
;;           ╭───┬───┬───┬───╮       ╭────╮╭───┬───┬───┬───╮
      -x- -x-  @  \#   $   %  -x-   delete ?\^   &   * ?\(  -x-  -x-
;;   ╭───┬───┼───┼───┼───┼───┤       ├────┤├───┼───┼───┼───┼────┬────╮
       ~   !  -x- -x- -x- -x-  -x-    ---  left down up right ?\) =
;;   ├───┼───┼───┼───┼───┼───┤       ╰────╯├───┼───┼───┼───┼────┼────┤
      --- -x- -x- -x- -x- -x-  -x-     -x-  -x- -x- -x- -x-   -   +
;;   ├───┼───┼───┴───┴───┼───┼─────╮ ╭─────┼───┼───┴───┴───┼────┼────┤
      --- -x- -x- -x-     --- ---      adj  ---     -x- -x-  -x- --- )
;;   ╰───┴───╯           ╰───┴─────╯ ╰─────┴───╯           ╰────┴────╯

     ("raise"
;;           ╭───┬───┬───┬───╮       ╭────╮╭───┬───┬───┬───╮
      -x- -x-  2   3   4   5   -x-    ---    6   7   8   9   -x- -x-
;;   ╭───┬───┼───┼───┼───┼───┤       ├────┤├───┼───┼───┼───┼────┬────╮
      \`   1  -x- -x- -x- -x-  -x-    --- home pgdn pgup end  0   |
;;   ├───┼───┼───┼───┼───┼───┤       ╰────╯├───┼───┼───┼───┼────┼────┤
      --- -x- -x- -x- -x- -x-  -x-     -x-  -x- -x- -x- -x-   _   \\
;;   ├───┼───┼───┴───┴───┼───┼─────╮ ╭─────┼───┼───┴───┴───┼────┼────┤
      --- -x- -x- -x-     ---  adj    ---    ---    -x- -x-  -x- --- )
;;   ╰───┴───╯           ╰───┴─────╯ ╰─────┴───╯           ╰────┴────╯

     ("adjust"
;;           ╭───┬───┬───┬───╮       ╭────╮╭───┬───┬───┬───╮
      -x- -x- F2  F3  F4  F5   -x-    ---   F6  F7  F8  F9   -x- -x-
;;   ╭───┬───┼───┼───┼───┼───┤       ├────┤├───┼───┼───┼───┼────┬────╮
      -x- F1  -x- -x- -x- -x-  -x-    ---   -x- -x- -x- -x-  F10  å
;;   ├───┼───┼───┼───┼───┼───┤       ╰────╯├───┼───┼───┼───┼────┼────┤
      --- -x- -x- -x- -x- -x-  -x-     -x-  -x- -x- -x- -x-   ø   æ
;;   ├───┼───┼───┴───┴───┼───┼─────╮ ╭─────┼───┼───┴───┴───┼────┼────┤
      --- -x- -x- -x-     ---  ---     ---  ---     -x- -x-  -x- --- )
;;   ╰───┴───╯           ╰───┴─────╯ ╰─────┴───╯           ╰────┴────╯
     )))
